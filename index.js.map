{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '50891107-566f278151ee6a9d75cddbbab';\n\nexport async function fetchImages(query , page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  const url = `${BASE_URL}?${new URLSearchParams(params)}`;\n\n  \n  const response = await axios.get(BASE_URL, { params });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\n\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({\n         webformatURL,\n         largeImageURL,\n         tags,\n         likes,\n         views,\n         comments,\n         downloads,\n       }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"gallery-info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </li>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\n\nconst TOAST_CONFIG = {\n  position: 'topRight',\n  timeout: 5000\n};\niziToast.settings(TOAST_CONFIG);\n\nlet CURRENT_PAGE = 1;\nconst PER_PAGE = 15;\n\n\nconst refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  input: document.querySelector('input[name=\"query\"]'),\n  loadMoreButton: document.querySelector('.js-load-more'),\n\n}\nconst UI = {\n  showLoader: () => refs.loader.classList.remove('hidden'),\n  hideLoader: () => refs.loader.classList.add('hidden'),\n  clearGallery: () => refs.gallery.innerHTML = '',\n  resetForm: () => refs.input.value = '',\n  showError: (message) => iziToast.error({ message }),\n  showInfo: (message) => iziToast.info({ message }),\n  showLoadMore: () => refs.loadMoreButton.classList.remove('hidden'),\n  hideLoadMore: () => refs.loadMoreButton.classList.add('hidden'),\n};\nconst scrollPage = () => {\n  const firstCard = refs.gallery.querySelector('.gallery-item');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n\n\nconst handleSubmit = event => {\n  event.preventDefault();\n  const query = refs.input.value.trim();\n\n  if (!query) {\n    UI.showError('Please enter search term');\n    return;\n  }\n\n  CURRENT_PAGE = 1;\n  processSearch(query);\n};\n\nconst handleLoadMore = async () => {\n  CURRENT_PAGE += 1;\n  UI.showLoader();\n  \n  try {\n    const data = await fetchImages(refs.input.value.trim(), CURRENT_PAGE, PER_PAGE);\n    renderGallery(data.hits);\n    scrollPage();\n\n    if (data.hits.length < PER_PAGE) {\n      UI.hideLoadMore();\n      UI.showInfo(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    UI.showError(`Request failed: ${error.message}`);\n  } finally {\n    UI.hideLoader();\n  }\n};\n\n\nconst processSearch = query => {\n  UI.showLoader();\n  UI.clearGallery();\n  UI.hideLoadMore();\n\n  fetchImages(query)\n    .then(data => {\n      if (!data.hits.length) {\n        UI.showError('No images found. Try another query!');\n        return;\n      }\n      \n      renderGallery(data.hits);\n      if (data.totalHits > PER_PAGE) {\n        UI.showLoadMore();\n      }\n    })\n    .catch(error => {\n      UI.showError(error.message || 'Search failed');\n    })\n    .finally(() => {\n      UI.hideLoader();\n    });\n};\n\n\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.loadMoreButton.addEventListener('click', handleLoadMore);"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","params","axios","gallery","lightbox","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","TOAST_CONFIG","iziToast","CURRENT_PAGE","PER_PAGE","refs","UI","message","scrollPage","firstCard","cardHeight","handleSubmit","event","processSearch","handleLoadMore","data","error"],"mappings":"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"}